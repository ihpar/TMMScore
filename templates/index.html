<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>&#6158;&nbsp;TMM Katip</title>
    <link rel="shortcut icon" href="../static/img/fav.png">
    <!-- font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <script type="text/javascript" src="{{ url_for('static', filename='js/vexflow-debug.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/snap.svg.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style/site.css') }}">
</head>
<body>
<div class="dv-main-wrapper">
    <div class="dv-center-content">
        <div id="dv-top">
            Merhaba, aşağıdaki menüden notalarınızı yazıp paylaşabilirsiniz!
        </div>
        <div id="dv-score-wrapper"></div>
        <div id="dv-tmm-wrapper"></div>
    </div>
</div>
<script type="text/javascript">
    "use strict";

    function vexTest() {
        let VF = Vex.Flow;

        let div = document.getElementById("dv-score-wrapper");
        let width = div.offsetWidth * 2;

        let renderer = new VF.Renderer(div, VF.Renderer.Backends.SVG);

        // Size our SVG:
        renderer.resize(width, width / 2);

        // And get a drawing context:
        let context = renderer.getContext();

        // Create a stave at position 10, 40 of width 400 on the canvas.
        let off_left = 10;
        let off_top = 10;
        let s_width = width - (off_left * 2);
        let stave = new VF.Stave(off_left, off_top, s_width);

        // Add a clef and time signature.
        stave.addClef("treble").addTimeSignature("012345/6789");

        // Connect it to the rendering context and draw!
        stave.setContext(context).draw();

        let notes = [
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "32"}).addAccidental(0, new VF.Accidental("bss")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "16"}).addAccidental(0, new VF.Accidental("b")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "8"}).addAccidental(0, new VF.Accidental("bs")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "4"}).addAccidental(0, new VF.Accidental("d")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "2"}).addAccidental(0, new VF.Accidental("+")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "1"}).addAccidental(0, new VF.Accidental("#")),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "8d"}).addAccidental(0, new VF.Accidental("+-")).addDot(0),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "4"}).addAccidental(0, new VF.Accidental("++-")).addDot(0),
            new VF.StaveNote({clef: "treble", keys: ["a/4"], duration: "1"}).addAccidental(0, new VF.Accidental("n"))
        ];

        VF.Formatter.FormatAndDraw(context, stave, notes);
    }

    // vexTest();

    function createTMMMenu(containerSelector) {
        let scoreMenu = document.createElement('div');
        scoreMenu.setAttribute('id', 'dv-score-menu');
        scoreMenu.className = 'dv-score-menu';

        let dvGroupAcc = document.createElement('div');
        dvGroupAcc.className = 'btn-group';

        let btnB8 = document.createElement('button');
        btnB8.innerHTML = '<img alt="b8" src="static/img/b8.svg">';

        let btnB5 = document.createElement('button');
        btnB5.innerHTML = '<img alt="b8" src="static/img/b5.svg">';

        let btnB4 = document.createElement('button');
        btnB4.innerHTML = '<img alt="b8" src="static/img/b4.svg">';

        let btnB1 = document.createElement('button');
        btnB1.innerHTML = '<img alt="b8" src="static/img/b1.svg">';

        let btnD1 = document.createElement('button');
        btnD1.innerHTML = '<img alt="b8" src="static/img/d1.svg">';

        let btnD4 = document.createElement('button');
        btnD4.innerHTML = '<img alt="b8" src="static/img/d4.svg">';

        let btnD5 = document.createElement('button');
        btnD5.innerHTML = '<img alt="b8" src="static/img/d5.svg">';

        let btnD8 = document.createElement('button');
        btnD8.innerHTML = '<img alt="b8" src="static/img/d8.svg">';

        dvGroupAcc.appendChild(btnB8);
        dvGroupAcc.appendChild(btnB5);
        dvGroupAcc.appendChild(btnB4);
        dvGroupAcc.appendChild(btnB1);
        dvGroupAcc.appendChild(btnD1);
        dvGroupAcc.appendChild(btnD4);
        dvGroupAcc.appendChild(btnD5);
        dvGroupAcc.appendChild(btnD8);

        let dvGroupNums = document.createElement('div');
        dvGroupNums.className = 'btn-group';

        let btn0 = document.createElement('button');
        btn0.innerHTML = '<img alt="b8" src="static/img/0.svg">';

        let btn1 = document.createElement('button');
        btn1.innerHTML = '<img alt="b8" src="static/img/1.svg">';

        dvGroupNums.appendChild(btn0);
        dvGroupNums.appendChild(btn1);

        scoreMenu.appendChild(dvGroupAcc);
        scoreMenu.appendChild(dvGroupNums);

        document.querySelector(containerSelector).append(scoreMenu);
    }

    const notePositions = {
        c3: 8.5,
        d3: 8,
        e3: 7.5,
        f3: 7,
        g3: 6.5,
        a3: 6,
        b3: 5.5,
        c4: 5,
        d4: 4.5,
        e4: 4,
        f4: 3.5,
        g4: 3,
        a4: 2.5,
        b4: 2,
        c5: 1.5,
        d5: 1,
        e5: 0.5,
        f5: 0,
        g5: -0.5,
        a5: -1,
        b5: -1.5,
        c6: -2,
        d6: -2.5,
        e6: -3,
        f6: -3.5,
        g6: -4,
        a6: -4.5,
        b6: -5,
        c7: -5.5,
        do3: 8.5,
        re3: 8,
        mi3: 7.5,
        fa3: 7,
        sol3: 6.5,
        la3: 6,
        si3: 5.5,
        do4: 5,
        re4: 4.5,
        mi4: 4,
        fa4: 3.5,
        sol4: 3,
        la4: 2.5,
        si4: 2,
        do5: 1.5,
        re5: 1,
        mi5: 0.5,
        fa5: 0,
        sol5: -0.5,
        la5: -1,
        si5: -1.5,
        do6: -2,
        re6: -2.5,
        mi6: -3,
        fa6: -3.5,
        sol6: -4,
        la6: -4.5,
        si6: -5,
        do7: -5.5
    };

    const noteNameDict = {
        c: "do",
        d: "re",
        e: "mi",
        f: "fa",
        g: "sol",
        a: "la",
        b: "si"
    };

    const symbols = {
        b8: "M 0,0.33443646 M 0.0072,-3.1402835 v 0.535686 c 0,0.04343 0.02172,0.07963 0.07963,0.07963 0.01447,0 0.463296,-0.166497 0.485013,-0.173736 0.05067,0 0.07239,0.02896 0.07239,0.05067 0,0.09411 0,0.188214 0.01447,0.260604 0,0.08687 -0.01447,0.108585 -0.06515,0.123063 -0.04343,0.02172 -0.477774,0.202692 -0.477774,0.202692 -0.07239,0 -0.108585,0.02172 -0.108585,0.07239 v 0.528447 c 0,0.04343 0.02172,0.08687 0.08687,0.08687 0.02172,0 0.419862,-0.159258 0.477774,-0.188214 0.07239,0 0.09411,0.04343 0.09411,0.07963 0.02172,1.65049196 0.06515,3.5253929 0.108585,3.5688269 0.02896,0.05067 0.05791,0.06515 0.09411,0.06515 0.02896,0 0.05791,-0.02172 0.05791,-0.02172 0.311277,-0.166497 0.571881,-0.463296 0.810768,-0.637032 0.919353,-0.64427097 1.252347,-1.27406394 1.252347,-1.76631593 0,-0.59359797 -0.456057,-0.95554797 -0.933831,-0.98450397 -0.180975,0 -0.398145,0.07963 -0.557403,0.173736 -0.07963,0.04343 -0.166497,0.14478 -0.260604,0.14478 -0.0072,0 -0.02172,-0.0072 -0.02896,-0.0072 -0.07239,-0.02896 -0.115824,-0.108585 -0.115824,-0.188214 0,-0.05067 0,-0.238887 0.01447,-0.477774 0,-0.04343 0,-0.14478 0.07239,-0.166497 0.07239,-0.03619 1.469517,-0.542925 1.469517,-0.542925 0.05791,-0.02172 0.09411,-0.06515 0.09411,-0.115824 v -0.4994909 c 0,-0.04343 -0.01447,-0.08687 -0.06515,-0.08687 -0.02896,0 -1.4478,0.521208 -1.491234,0.542925 -0.0073,0 -0.05791,-0.02896 -0.05791,-0.05067 0.0072,-0.09411 0.0072,-0.231648 0.0072,-0.28956 0,-0.06515 0.02896,-0.09411 0.07239,-0.115824 0.04343,-0.02172 1.440561,-0.5356861 1.440561,-0.5356861 0.05791,-0.01448 0.09411,-0.05791 0.09411,-0.101346 v -0.513969 c 0,-0.0362 -0.01447,-0.07963 -0.06515,-0.07963 -0.02896,0 -1.418844,0.50673 -1.4478,0.521208 -0.05067,0 -0.07239,-0.02896 -0.07239,-0.05067 0,-0.202692 0.0072,-0.325755 0.0072,-0.369189 0,-0.115824 -0.09411,-0.166497 -0.195453,-0.166497 -0.14478,0 -0.311277,0.108585 -0.325755,0.296799 v 0.448818 c 0,0.01448 -0.0072,0.07239 -0.05791,0.07963 -0.03619,0.02172 -0.470535,0.188214 -0.470535,0.188214 -0.07239,0.0072 -0.108585,0.04343 -0.108585,0.07963 m 1.107567,2.94627299 c 0.04343,-0.137541 0.311277,-0.369189 0.470535,-0.44881797 0.09411,-0.04343 0.173736,-0.06515 0.260604,-0.06515 0.101346,0 0.195453,0.02896 0.267843,0.101346 0.09411,0.11582397 0.159258,0.28232097 0.159258,0.49225197 0,0.57188097 -0.456057,1.12928391 -0.926592,1.40436591 -0.04343,0.02172 -0.07239,0.03619 -0.09411,0.03619 -0.08687,0 -0.115824,-0.108585 -0.115824,-0.166497 0,0 -0.02896,-0.66598797 -0.02896,-1.07861094 0,-0.130302 0,-0.23888697 0.0072,-0.27508197",
        b5: "M 0,0.17463801 M 0.123063,1.9481929 c 0.03619,0.04343 0.06515,0.05067 0.09411,0.05067 0.03619,0 0.06515,-0.02172 0.06515,-0.02172 0.311277,-0.173736 0.564642,-0.456057 0.825246,-0.637032 0.926592,-0.64427092 1.2451081,-1.28130289 1.2451081,-1.75907686 0,-0.59359794 -0.4560571,-0.97002594 -0.9338311,-0.99898194 -0.180975,0 -0.427101,0.07963 -0.571881,0.1737359 -0.06515,0.05067 -0.180975,0.1447801 -0.231648,0.1447801 -0.02172,0 -0.02896,0 -0.05067,-0.0072 -0.07239,-0.02896 -0.115824,-0.108585 -0.115824,-0.1809749 0.0072,-0.224409 0.07239,-2.7291031 0.07239,-2.9390341 0,-0.115824 -0.09411,-0.173736 -0.195453,-0.173736 -0.152019,0 -0.318516,0.101346 -0.325755,0.28956 0,0 0.04343,5.9504579 0.123063,6.0590429 m 0.354711,-2.30200188 c 0.07239,-0.209931 0.492252,-0.51396897 0.731139,-0.51396897 0.3040381,0 0.427101,0.34747197 0.427101,0.60807597 0,0.55740297 -0.4777739,1.12204491 -0.926592,1.40436588 -0.04343,0.02172 -0.07239,0.02896 -0.101346,0.02896 -0.09411,0 -0.115824,-0.101346 -0.115824,-0.152019 0,0 -0.03619,-0.62979294 -0.03619,-1.04241591 0,-0.166497 0.01447,-0.29679897 0.02172,-0.33299397",
        b4: "M 0.0072,0.275054 M 0,-1.520218 c 0,0.04343 0.01447,0.08687 0.07239,0.08687 0.02172,0 0.499491,-0.180975 0.521208,-0.202692 0.03619,0 0.05791,0.02172 0.05791,0.04343 0.02172,1.650492 0.05067,3.576066 0.108585,3.641217 0.02896,0.04343 0.05791,0.05067 0.07963,0.05067 0.03619,0 0.06515,-0.02172 0.06515,-0.02172 C 1.21615,1.91106 1.476754,1.6215 1.737358,1.440525 2.66395,0.796254 2.989705,0.151983 2.989705,-0.33303 c 0,-0.593598 -0.463296,-0.955548 -0.94107,-0.984504 -0.05791,0 -0.130302,0.0072 -0.195453,0.02896 -0.123063,0.02896 -0.238887,0.07239 -0.376428,0.14478 -0.07239,0.05067 -0.188214,0.137541 -0.231648,0.137541 -0.02172,0 -0.03619,0 -0.05791,-0.01448 -0.07239,-0.01448 -0.115824,-0.09411 -0.115824,-0.166497 0,-0.05791 0.02172,-0.477774 0.02172,-0.535686 0,-0.07963 0.02896,-0.09411 0.05791,-0.108585 0.03619,-0.0072 1.483995,-0.571881 1.483995,-0.571881 0.07239,-0.02172 0.101346,-0.06515 0.101346,-0.101346 v -0.50673 c 0,-0.02896 -0.0072,-0.09411 -0.05791,-0.09411 -0.01447,0 -0.03619,0 -0.04343,0.01448 0,0 -1.418844,0.521208 -1.462278,0.542925 -0.05067,0 -0.05791,-0.03619 -0.05791,-0.06515 0.0072,-0.687705 0.02896,-1.404366 0.02896,-1.512951 0,-0.115824 -0.09411,-0.173736 -0.195453,-0.173736 -0.137541,0 -0.304038,0.101346 -0.318516,0.28956 0,0 0,0.658749 0.01447,1.556385 0,0.02896 0,0.123063 -0.08687,0.152019 L 0.09411,-2.121061 C 0.02896,-2.113861 0,-2.092101 0,-2.041431 m 1.078611,2.121027 c 0,-0.166497 0.01447,-0.296799 0.02172,-0.332994 0.07239,-0.231648 0.492252,-0.513969 0.752856,-0.513969 0.311277,0 0.412623,0.325755 0.412623,0.593598 0,0.586359 -0.456057,1.143762 -0.948309,1.418844 -0.03619,0.02172 -0.07239,0.02896 -0.101346,0.02896 -0.07963,0 -0.101346,-0.09411 -0.101346,-0.152019 0,0 -0.03619,-0.629793 -0.03619,-1.042416",
        b1: "M 0,0.34170846 M 1.259586,1.5071874 c 0.260604,0.180975 0.513969,0.463296 0.825246,0.637032 0,0 0.02896,0.02172 0.06515,0.02172 0.02896,0 0.05791,-0.0072 0.09411,-0.05067 0.07963,-0.108585 0.123063,-6.0590429 0.123063,-6.0590429 -0.01447,-0.188214 -0.180975,-0.28956 -0.325755,-0.28956 -0.101346,0 -0.195453,0.05791 -0.195453,0.173736 0,0.209931 0.06515,2.7146251 0.07239,2.9390341 0,0.07239 -0.04343,0.15201892 -0.115824,0.18097492 -0.02172,0.0072 -0.02896,0.0072 -0.05067,0.0072 -0.05067,0 -0.166497,-0.09411 -0.231648,-0.14478002 -0.14478,-0.09411 -0.390906,-0.1737359 -0.571881,-0.1737359 -0.477774,0.02896 -0.94107,0.40538392 -0.94107,0.97726489 0,0.49949097 0.325755,1.13652294 1.252347,1.78079391 M 0.731139,-0.09263151 c 0,-0.260604 0.123063,-0.60807597 0.427101,-0.60807597 0.238887,0 0.658749,0.30403797 0.731139,0.51396897 0.0073,0.03619 0.02172,0.16649697 0.02172,0.33299397 0,0.41262297 -0.0362,1.04241594 -0.0362,1.04241594 0,0.05067 -0.02172,0.152019 -0.115824,0.152019 -0.02896,0 -0.05791,-0.0072 -0.101346,-0.02896 C 1.208911,1.0294094 0.731137,0.46476746 0.731137,-0.09263551",
        n: "M 0,0.03920829 M 0,1.9792602 c 0,0.05791 0.029,0.09411 0.0869,0.09411 0.007,0 0.0579,-0.01448 0.0724,-0.02172 0.14478,-0.06515 0.7239,-0.311277 1.02794,-0.311277 0.10858,0 0.18097,0.02896 0.18097,0.115824 v 1.549146 c 0,0.07239 0.0507,0.123063 0.12307,0.123063 h 0.13754 c 0.0579,0 0.12306,-0.05067 0.12306,-0.123063 v -5.2337968 c 0,-0.05067 -0.0434,-0.07963 -0.0869,-0.07963 -0.007,0 -0.029,0 -0.0362,0.0072 l -0.15926,0.05067 c -0.0217,0 -0.029,0.01448 -0.0434,0.01448 0,0 -0.66599,0.238887 -0.93383,0.238887 -0.0652,0 -0.10859,-0.01448 -0.10859,-0.05067 v -1.7445991 c 0,-0.07239 -0.0579,-0.123063 -0.12306,-0.123063 H 0.1231 c -0.0724,0 -0.12307,0.05067 -0.12307,0.123063 m 1.27407,2.60604002 c 0.0579,0 0.0941,0.01448 0.0941,0.05067 v 1.07861094 c 0,0.188214 -0.59359,0.42710097 -0.8542,0.42710097 -0.0796,0 -0.1303,-0.02172 -0.1303,-0.06515 v -1.07137194 c 0,-0.14477997 0.63703,-0.41986197 0.8904,-0.41986197",
        d1: "M 3e-5,-0.24259067 M 0.0869,2.0376943 c 0.0362,0 0.463296,-0.188214 0.528447,-0.21717 0.05067,-0.02172 0.14478,0.115824 0.14478,0.195453 v 1.30302 c 0,0.06515 0.06515,0.115824 0.14478,0.115824 0.159258,0 0.180975,-0.07239 0.180975,-0.173736 v -1.440561 c 0,-0.02896 0,-0.05067 0.0072,-0.07963 0.01447,-0.06515 0.05067,-0.130302 0.09411,-0.152019 0.08687,-0.01448 0.550164,-0.202692 0.550164,-0.202692 0.06515,-0.02172 0.130302,-0.108585 0.130302,-0.166497 v -0.745617 c 0,-0.05791 -0.03619,-0.09411 -0.08687,-0.09411 -0.0072,0 -0.02896,0.01448 -0.04343,0.01448 v -0.01448 c 0,0 -0.477774,0.202692 -0.521208,0.209931 -0.07239,0 -0.14478,-0.05791 -0.14478,-0.173736 v -0.97002594 c 0,-0.08687 0.05791,-0.27508202 0.137541,-0.30403792 0.09411,-0.04343 0.528447,-0.20993104 0.528447,-0.20993104 0.06515,-0.02896 0.130302,-0.101346 0.130302,-0.173736 v -0.7383739 c 0,-0.05791 -0.04343,-0.08687 -0.08687,-0.08687 -0.0072,0 -0.02896,0 -0.04343,0.0072 0,0 -0.499491,0.1882139 -0.521208,0.1882139 -0.08687,0 -0.130302,-0.1085849 -0.130302,-0.2026919 v -1.2523471 c 0,-0.06515 -0.06515,-0.115824 -0.14478,-0.115824 -0.159258,0 -0.180975,0.09411 -0.180975,0.173736 v 1.360932 c 0,0.07963 -0.02896,0.2026921 -0.101346,0.2678431 -0.188214,0.07239 -0.354711,0.159258 -0.535686,0.231648 C 0.065153,-1.3863905 0,-1.3067646 0,-1.2416136 v 0.73837796 c 0,0.06515 0.02896,0.09411 0.08687,0.09411 0.0072,0 0.02896,-0.0072 0.0362,-0.0072 0,0 0.405384,-0.180975 0.492252,-0.209931 0.0072,0 0.02172,-0.01448 0.02896,-0.01448 0.06515,0 0.130302,0.09411 0.130302,0.180975 V 0.5826543 c 0,0.115824 -0.04343,0.20993097 -0.108585,0.22440897 L 0.123074,1.0387113 C 0.065164,1.0604313 1.1e-5,1.1472963 1.1e-5,1.2052083 v 0.738378 c 0,0.06515 0.02896,0.09411 0.08687,0.09411",
        d4: "m 1e-5,0.04028037 m 0.0869,-0.267843 c 0.0362,0 0.23889,-0.09411 0.26785,-0.115824 0.007,0 0.0217,-0.01448 0.0289,-0.01448 0.0724,0 0.13754,0.108585 0.13754,0.188214 v 1.035177 c 0,0.115824 -0.0507,0.20993103 -0.11582,0.23888703 -0.0579,0.02172 -0.28232,0.115824 -0.28232,0.115824 C 0.05066,1.2419554 0,1.3215814 0,1.3867324 v 0.738378 c 0,0.06515 0.029,0.09411 0.0869,0.09411 0.007,0 0.029,-0.0072 0.0362,-0.0072 0,0 0.14478,-0.06515 0.23889,-0.09411 0.0145,-0.01448 0.0217,-0.01448 0.0362,-0.01448 0.0724,0 0.12306,0.115824 0.12306,0.166497 v 1.281303 c 0,0.06515 0.0652,0.115824 0.13754,0.115824 0.10135,0 0.17374,-0.05067 0.17374,-0.115824 v -1.4478 c 0,-0.137541 0.0507,-0.209931 0.10859,-0.231648 l 0.62979,-0.260604 c 0.0145,0 0.0362,-0.0072 0.0434,-0.0072 0.0869,0 0.13754,0.123063 0.13754,0.188214 v 1.30302 c 0,0.06515 0.0652,0.115824 0.13754,0.115824 0.10859,0 0.17374,-0.05067 0.17374,-0.115824 v -1.483995 c 0,-0.07963 0.0434,-0.202692 0.11582,-0.238887 0.0724,-0.02896 0.28956,-0.115824 0.28956,-0.115824 0.0724,-0.02896 0.13031,-0.108585 0.13031,-0.173736 V 0.34439237 c 0,-0.05067 -0.0362,-0.08687 -0.0796,-0.08687 -0.0145,0 -0.029,0 -0.0507,0.01448 l -0.26784,0.101346 c -0.0652,0 -0.13754,-0.06515 -0.13754,-0.188214 v -0.970026 c 0,-0.07239 0.0507,-0.26784297 0.13754,-0.30403797 l 0.26784,-0.101346 c 0.0724,-0.02896 0.13031,-0.115824 0.13031,-0.173736 v -0.745617 c 0,-0.05067 -0.0362,-0.07963 -0.0796,-0.07963 -0.0145,0 -0.029,0 -0.0507,0.0072 0,0 -0.20993,0.08687 -0.2606,0.09411 -0.0724,0 -0.14478,-0.05067 -0.14478,-0.130302 v -1.274064 c 0,-0.06515 -0.0652,-0.115824 -0.14478,-0.115824 -0.10135,0 -0.1665,0.05067 -0.1665,0.115824 v 1.353693 c -0.0145,0.101346 -0.0434,0.238887 -0.13754,0.304038 -0.12306,0.07239 -0.47777,0.21717 -0.65875,0.260604 -0.0869,0 -0.12306,-0.123063 -0.12306,-0.209931 v -1.252347 c 0,-0.05791 -0.0724,-0.115824 -0.14478,-0.115824 -0.10135,0 -0.1665,0.05791 -0.1665,0.115824 v 1.411605 c 0,0.14478 -0.0652,0.246126 -0.12306,0.275082 -0.0651,0.03619 -0.27508,0.115824 -0.27508,0.115824 -0.0724,0.02172 -0.12306,0.108585 -0.12306,0.166497 v 0.74557997 c 0,0.05791 0.029,0.09411 0.0869,0.09411 m 0.71666,0.57912 c 0,-0.318516 0.007,-0.687705 0.029,-0.767334 0.0217,-0.180975 0.49949,-0.398145 0.7601,-0.398145 0.0724,0 0.13754,0.02172 0.15925,0.06515 0.0217,0.05067 0.0434,0.311277 0.0434,0.593598 0,0.282321 -0.0217,0.571881 -0.0434,0.665988 -0.0651,0.209931 -0.55016,0.412623 -0.79629,0.412623 -0.0579,0 -0.10858,-0.01448 -0.12306,-0.05067 -0.0217,-0.04343 -0.029,-0.267843 -0.029,-0.521208",
        d5: "M 0.00723,-0.02898164 M 2.3e-4,0.29677333 V 0.9700003 c 0,0.05067 0.029,0.115824 0.0941,0.115824 L 1.56384,0.54289933 c 0.029,0 0.0362,0.01448 0.0362,0.03619 v 0.152019 c 0,0.07239 -0.007,0.10858497 -0.0724,0.12306297 -0.0579,0.03619 -0.80353,0.332994 -0.80353,0.332994 -0.0724,0.03619 -0.12306,0.108585 -0.12306,0.180975 v 0.738378 c 0,0.05067 0.0289,0.08687 0.0724,0.08687 0.0217,0 0.029,0 0.0507,-0.01448 0,0 0.7239,-0.28956 0.79629,-0.311277 0.0796,0 0.0796,0.01448 0.0796,0.115824 v 1.397127 c 0,0.06515 0.0652,0.115824 0.13754,0.115824 0.15926,0 0.18097,-0.07239 0.18097,-0.166497 v -1.4478 c 0,-0.03619 0,-0.05791 0.007,-0.07963 0.0217,-0.05791 0.0507,-0.123063 0.10135,-0.14478 0.0724,-0.02896 0.8397204,-0.318516 0.8397204,-0.318516 0.0724,-0.03619 0.12307,-0.108585 0.12307,-0.180975 V 0.41983033 c 0,-0.05067 -0.0217,-0.08687 -0.0724,-0.08687 -0.0145,0 -0.0362,0 -0.0507,0.01448 L 2.01963,0.66595633 c -0.0724,0 -0.10135,-0.01448 -0.10135,-0.07239 v -0.130302 c 0,-0.04343 0.007,-0.05791 0.0362,-0.06515 0.0362,-0.0072 1.4622804,-0.55016397 1.4622804,-0.55016397 0.0941,-0.0362 0.12306,-0.07239 0.12306,-0.13754097 v -0.65874862 c 0,-0.05067 -0.007,-0.12306297 -0.0796,-0.12306297 -0.0145,0 -0.0362,0.02172 -0.0434,0.02172 v -0.01448 c 0,0 -1.3681704,0.52120789 -1.4260904,0.54292459 -0.0145,0 -0.0362,0.01448 -0.0434,0.01448 -0.029,0 -0.029,-0.02172 -0.029,-0.03619 v -0.15201902 c 0,-0.04343 0.007,-0.05067 0.0507,-0.07239 L 2.8666604,-1.1148285 c 0.0724,-0.02896 0.12307,-0.1013461 0.12307,-0.1737361 v -0.7383779 c 0,-0.05791 -0.0217,-0.08687 -0.0724,-0.08687 -0.0145,0 -0.0362,0 -0.0507,0.0072 0,0 -0.7962904,0.2967989 -0.8180004,0.3040379 -0.0941,0 -0.13031,-0.1230629 -0.13031,-0.2099309 v -1.2451081 c 0,-0.06515 -0.0651,-0.115824 -0.13754,-0.115824 -0.16649,0 -0.18097,0.07963 -0.18097,0.166497 v 1.3536931 c -0.007,0.09411 -0.0362,0.209931 -0.11583,0.282321 -0.21717,0.07963 -0.5574,0.2678429 -0.76009,0.2678429 -0.0724,0.03619 -0.12306,0.1085851 -0.12306,0.1809751 v 0.73837789 c 0,0.05067 0.0289,0.08687 0.0724,0.08687 0.0217,0 0.029,0 0.0507,-0.01448 l 0.80353,-0.28956 c 0.0145,-0.01448 0.0362,-0.01448 0.0434,-0.01448 0.0217,0 0.029,0.01448 0.029,0.02172 v 0.159258 c 0,0.02896 0,0.05791 -0.029,0.07239 -0.0434,0.0072 -1.4478,0.54292497 -1.4478,0.54292497 C 0.03616,0.20263236 0,0.23158236 0,0.29673633",
        d8: "M 0.00591,-0.01762169 M 1.80842,-3.8904867 c 0.0145,-0.01448 0.029,-0.01448 0.0579,-0.01448 0.0652,0 0.11583,0.02896 0.13755,0.09411 l 0.007,0.02172 0.0145,0.7383781 v 0.745617 l 0.18098,-0.05067 c 0.10858,-0.02172 0.18821,-0.03619 0.23888,-0.03619 0.0724,0 0.0869,0.02896 0.11583,0.08687 0.0145,0.0072 0.0145,0.188214 0.0145,0.36195 0,0.180975 0,0.354711 -0.0145,0.369189 -0.029,0.06515 -0.0434,0.07239 -0.24613,0.123063 -0.25336,0.05791 -0.28956,0.07239 -0.28956,0.07963 0,0 0,0.09411 0,0.2244091 0,0.03619 0,0.08687 0,0.14478 v 0.37642794 l 0.0724,-0.02172 0.2968,-0.07963 c 0.15926,-0.02896 0.23165,-0.05067 0.26784,-0.05067 0.0362,0 0.0579,0.0072 0.0796,0.02896 0.0507,0.04343 0.0579,0.05067 0.0579,0.28956 0,0.04343 0,0.09411 0,0.152019 v 0.32575497 l -0.007,0.02172 c -0.0145,0.02896 -0.0507,0.07239 -0.0796,0.07963 -0.0145,0 -0.19546,0.05067 -0.60084,0.15201897 -0.0507,0.0072 -0.0869,0.02172 -0.0869,0.02172 0,0 0,0.115824 0,0.28956 0,0.02896 0,0.05791 0,0.08687 V 1.0320603 l 0.18098,-0.0361999 c 0.12306,-0.02896 0.18821,-0.05067 0.23888,-0.05067 0.0434,0 0.0724,0.02172 0.0869,0.05067 0.0434,0.0361999 0.0434,0.01448 0.0434,0.29679895 v 0.115824 0.09411 c 0,0.282321 0,0.267843 -0.0434,0.304038 -0.029,0.04343 -0.0145,0.04343 -0.35471,0.123063 -0.0651,0.02172 -0.13754,0.02896 -0.14478,0.03619 h -0.007 l -0.0145,0.752856 v 0.760095 l -0.007,0.02896 c -0.0217,0.05791 -0.0796,0.08687 -0.13755,0.08687 -0.0579,0 -0.10858,-0.02896 -0.13754,-0.08687 l -0.0145,-0.02896 v -0.716661 -0.716661 h -0.007 l -0.1665,0.04343 -0.30404,0.07239 c -0.0796,0.02896 -0.15926,0.03619 -0.15926,0.05067 -0.007,0 -0.007,0.03619 -0.007,0.774573 v 0.781812 l -0.0145,0.02172 c -0.029,0.05791 -0.0869,0.08687 -0.13754,0.08687 -0.0579,0 -0.11583,-0.02896 -0.14478,-0.08687 l -0.0145,-0.02172 v -0.74563 c 0,-0.680466 0,-0.745617 -0.007,-0.745617 0,0 0,0 0,0 -0.0796,0.03619 -0.35471,0.09411 -0.38367,0.09411 -0.0579,0 -0.10858,-0.02896 -0.13754,-0.09411 -0.0145,-0.01448 -0.0145,-0.01448 -0.0145,-0.36195 v -0.347472 l 0.0217,-0.02172 c 0.029,-0.07239 0.029,-0.07239 0.43434,-0.173736 l 0.0869,-0.01448 V 0.98135535 c 0,-0.34023297 0,-0.36918897 -0.007,-0.36918897 0,0 0,0 0,0 0,0 -0.0507,0.0072 -0.10859,0.02896 l -0.28232,0.07239 c -0.12306,0.02896 -0.18821,0.0362 -0.23165,0.0362 -0.0289,0 -0.0507,-0.0072 -0.0796,-0.02896 C 0.0073,0.68456628 0,0.67008628 0,0.43119628 c 0,-0.04343 0.007,-0.09411 0.007,-0.152019 v -0.32575497 l 0.007,-0.01448 c 0.007,-0.03619 0.0362,-0.06515 0.0651,-0.07239 0.0145,-0.01448 0.20269,-0.05791 0.58636,-0.15201897 l 0.0941,-0.02896 v -0.376428 c 0,-0.34023294 0,-0.36918894 -0.007,-0.36918894 0,0 0,0 0,0 -0.0796,0.02172 -0.35471,0.09411 -0.38367,0.09411 -0.0579,0 -0.10858,-0.04343 -0.13754,-0.09411 -0.0145,-0.02172 -0.0145,-0.02896 -0.0145,-0.369189 v -0.3402331 l 0.0217,-0.02172 c 0.029,-0.07239 0.029,-0.07239 0.43434,-0.1737359 l 0.0869,-0.02896 v -0.752856 -0.7528561 l 0.0145,-0.02896 c 0.029,-0.05067 0.0869,-0.09411 0.14478,-0.09411 0.0217,0 0.0434,0.01448 0.0579,0.02172 0.029,0.0072 0.0579,0.04343 0.0796,0.07239 l 0.0145,0.02896 v 0.709422 0.7239001 l 0.0362,-0.0072 c 0.0217,-0.0072 0.13754,-0.04343 0.27508,-0.07239 l 0.28956,-0.06515 0.0434,-0.01448 v -0.7818121 -0.781812 l 0.0145,-0.02172 c 0.0145,-0.02896 0.0362,-0.06515 0.0796,-0.07963 m -0.0941,2.96075107 c 0,-0.20269197 0,-0.36918907 -0.007,-0.36918907 v 0 c 0,0 -0.0724,0.02172 -0.15926,0.0362 l -0.31128,0.07963 c -0.0941,0.02172 -0.1665,0.04343 -0.1665,0.04343 0,0 0,0.09411 0,0.22440905 0,0.05067 0,0.09411 0,0.15925797 v 0.36195 l 0.0434,-0.01448 0.54292,-0.130302 0.0579,-0.01448 v -0.37642797 m 0,1.67220891 c 0,-0.28956 0,-0.369189 -0.007,-0.369189 v 0 c 0,0 -0.007,0 -0.029,0.0072 -0.029,0 -0.19545,0.05067 -0.4271,0.101346 l -0.1665,0.05067 H 1.07139 V 0.90170823 1.2781362 l 0.0362,-0.01448 c 0.0217,0 0.13754,-0.02896 0.27508,-0.07239 l 0.28956,-0.06515 0.0434,-0.01448 V 0.74244728",
        gClef: "m 0,10.679239 m 3.513735,2.43414 c 0.221285,0 0.476097,-0.0201 0.67056,-0.0603 0.100584,-0.0201 0.120701,-0.0268 0.140817,0.0872 0.113996,0.65044 0.261519,1.48864 0.261519,1.94462 0,1.42829 -0.965607,1.60264 -1.535583,1.60264 -0.523036,0 -0.771144,-0.15423 -0.771144,-0.28164 0,-0.0671 0.08717,-0.0939 0.308458,-0.16764 0.301752,-0.0872 0.643738,-0.34198 0.643738,-0.90525 0,-0.52974 -0.33528,-0.98572 -0.925373,-0.98572 -0.643738,0 -1.032663,0.51633 -1.032663,1.11313 0,0.62362 0.375514,1.57581 1.837335,1.57581 0.643737,0 1.897685,-0.29505 1.897685,-1.93121 0,-0.55657 -0.174346,-1.46853 -0.27493,-2.07203 -0.02012,-0.114 -0.01341,-0.10058 0.120701,-0.16093 0.979017,-0.38893 1.622755,-1.20701 1.622755,-2.30003 0,-1.2338301 -0.905256,-2.3268401 -2.326843,-2.3268401 -0.248107,0 -0.248107,0 -0.281635,-0.17434 L 3.62773,6.6693789 c -0.01341,-0.114 0,-0.12071 0.06035,-0.18106 1.046074,-0.97231 1.837334,-2.19943 1.837334,-3.68137 0,-0.8382 -0.234696,-1.66969 -0.630326,-2.24637997 -0.147523,-0.21458001 -0.39563,-0.48280001 -0.50292,-0.48280001 -0.134112,0 -0.435864,0.24811 -0.623621,0.46269001 C 3.051048,1.3317189 2.816352,2.5387289 2.816352,3.5445689 c 0,0.55656 0.07376,1.18689 0.140818,1.58252 0.02012,0.11399 0.02682,0.13411 -0.08717,0.23469 C 1.475235,6.5084389 3e-6,7.8897889 3e-6,9.8411193 c 0,1.6763997 1.146658,3.2723397 3.513735,3.2723397 m -2.742591,-2.6286 c 0,-0.5699697 0.100584,-1.3344101 0.898551,-2.2396701 0.583387,-0.64374 1.025957,-1.00584 1.475232,-1.36794 0.100584,-0.0805 0.120701,-0.0671 0.140817,0.0335 l 0.201168,1.24054 c 0.02682,0.18105 0.02682,0.17434 -0.147523,0.22799 -0.844905,0.28834 -1.40147,1.05277 -1.40147,1.8775601 0,0.86503 0.455981,1.48194 1.113129,1.70993 0.08047,0.0268 0.194463,0.0536 0.261519,0.0536 0.07376,0 0.113995,-0.0469 0.113995,-0.10729 0,-0.0671 -0.07376,-0.0939 -0.140818,-0.1207 -0.409041,-0.17434 -0.697382,-0.59009 -0.697382,-1.03266 0,-0.55657 0.375514,-0.9656097 0.965606,-1.1332497 0.154229,-0.0402 0.174346,-0.0268 0.194463,0.0805 l 0.482803,2.8766997 c 0.02012,0.10729 0.0067,0.10729 -0.134112,0.13412 -0.154229,0.0268 -0.348691,0.0469 -0.543154,0.0469 -1.689811,0 -2.782824,-0.93879 -2.782824,-2.27991 M 4.539695,1.5730389 c 0.315163,0 0.576681,0.26152 0.576681,0.79126 0,1.0729 -0.918667,1.94462 -1.6764,2.60848 -0.06706,0.0604 -0.107289,0.0469 -0.127406,-0.0805 -0.04023,-0.24811 -0.06035,-0.57668 -0.06035,-0.88514 0,-1.50876 0.697382,-2.43413 1.287475,-2.43413 M 4.258059,9.5526693 c 0.784556,0.0671 1.428293,0.7242097 1.428293,1.5691097 0,0.61021 -0.368808,1.09972 -0.905256,1.37465 -0.113995,0.0536 -0.134112,0.0536 -0.154229,-0.0603 L 4.15077,9.6868393 c -0.02012,-0.12071 -0.0067,-0.14753 0.107289,-0.13412",
        numbers: [
            "m 0,2.338197 m 2.1892259,2.33172 c 1.114044,0 2.00787,-1.042797 2.00787,-2.33172 C 4.1970959,1.042797 3.3032699,0 2.1892259,0 c -1.107567,0 -2.001393,1.042797 -2.001393,2.338197 0,1.288923 0.893826,2.33172 2.001393,2.33172 m -0.699516,-2.39649 c 0,-1.10109 0.310896,-1.988439 0.699516,-1.988439 0.382143,0 0.699516,0.887349 0.699516,1.988439 0,1.088136 -0.317373,1.975485 -0.699516,1.975485 -0.38862,0 -0.699516,-0.887349 -0.699516,-1.975485",
            "m 0,2.338229 m 0.187833,0 c 0,0.04534 0.02591,0.103632 0.103632,0.12954 0.03239,0.01295 0.07125,0.01943 0.0842,0.01943 0.09068,0 0.12954,-0.0842 0.12954,-0.0842 0,0 0.401574,-0.641223 0.505206,-0.822579 0.03239,-0.06477 0.07125,-0.09068 0.09068,-0.09068 0.03886,0 0.05829,0.07125 0.05829,0.12954 v 2.409444 c 0,0.213741 -0.220218,0.349758 -0.414528,0.349758 -0.06477,0 -0.155448,0.03239 -0.155448,0.142494 0,0.103632 0.0842,0.148971 0.200787,0.148971 h 1.988439 c 0.148971,0 0.148971,-0.148971 0.148971,-0.148971 0,0 0,-0.142494 -0.136017,-0.142494 -0.136017,0 -0.304419,-0.168402 -0.304419,-0.32385 V 0.213771 C 2.487166,0.0648 2.435346,0.006507 2.30581,3e-5 2.17627,3e-5 1.943098,0.03241 1.820035,0.03241 1.638679,0.03241 1.476754,0.02591 1.33426,0.0065 1.31483,0.0065 1.2954,0 1.28892,0 1.19176,0 1.15938,0.09068 1.120518,0.174879 L 0.226692,2.215134 c 0,0 -0.03886,0.05829 -0.03886,0.123063",
            "m 0,2.370576 m 0.187833,-1.10109 c 0,0.12954 0.02591,0.25908 0.0842,0.401574 0.136017,0.291465 0.427482,0.511683 0.764286,0.511683 0.569976,0 0.654177,-0.589407 0.654177,-0.822579 0,-0.557022 -0.6477,-0.58293 -0.6477,-0.770763 0.01943,-0.12954 0.187833,-0.356235 0.738378,-0.356235 0.829056,0 0.84201,0.628269 0.84201,0.893826 0,0.854964 -0.699516,1.496187 -1.373124,1.904238 -0.511683,0.330327 -0.874395,0.783717 -1.03632,1.373124 0,0.142494 0.04534,0.362712 0.233172,0.362712 0.207264,0 0.317373,-0.569976 0.867918,-0.569976 0.375666,0 0.511683,0.505206 1.340739,0.505206 0.401574,0 1.120521,-0.03886 1.269492,-1.483233 0,-0.110109 -0.04534,-0.12954 -0.110109,-0.12954 -0.07772,0 -0.103632,0.03886 -0.123063,0.09068 0,0.01295 -0.0065,0.01943 -0.0065,0.03238 -0.09716,0.220218 -0.168402,0.401574 -0.362712,0.401574 -0.05182,0 -0.09716,-0.01295 -0.161925,-0.03238 C 3.037689,3.536437 2.972919,3.529957 2.882241,3.478145 2.694408,3.406895 2.253972,3.257927 1.871829,3.257927 c -0.116586,0 -0.239649,0.01943 -0.343281,0.05182 C 1.735812,2.97942 2.526006,2.694432 2.73327,2.642616 3.387447,2.46126 3.970377,2.195703 3.970377,1.418463 3.970377,0.427482 3.005304,0 2.137386,0 1.483209,0 0.906756,0.05829 0.446889,0.589407 0.291441,0.783717 0.187809,1.016889 0.187809,1.269492",
            "m 0,2.325238 m 0.187833,1.314831 c 0.01943,0.725424 0.680085,1.010412 1.593342,1.023366 h 0.0842 c 0.926211,0 1.871853,-0.472821 1.871853,-1.2954 V 3.303265 C 3.724278,3.031231 3.653028,2.856352 3.478148,2.649088 3.419858,2.577838 3.348608,2.513071 3.25793,2.454778 L 3.057143,2.344669 2.752724,2.260469 c -0.04534,-0.01295 -0.07772,-0.01295 -0.09716,-0.04534 -0.0065,-0.01943 -0.0065,-0.03238 -0.0065,-0.04534 0,-0.03886 0.0065,-0.07772 0.03886,-0.0842 0.103632,-0.03238 0.200787,-0.03886 0.284988,-0.0842 C 3.348578,1.820033 3.542888,1.580384 3.542888,1.152902 3.542888,0.291461 2.377028,0.038858 1.988408,0.01295 1.943068,0.01295 1.891248,0 1.845914,0 1.042766,0 0.239618,0.537591 0.239618,1.029843 c 0,0.304419 0.181356,0.718947 0.757809,0.751332 h 0.04534 c 0.414528,0 0.615315,-0.297942 0.615315,-0.602361 V 1.101094 C 1.632172,0.757813 1.399002,0.738382 1.353663,0.718951 c -0.04534,-0.01943 -0.187833,0 -0.187833,-0.12954 V 0.550551 C 1.18526,0.395103 1.476726,0.317379 1.55445,0.317379 c 0.796671,0 0.867918,0.498729 0.867918,0.718947 v 0.06477 c 0,0.693039 -0.550545,0.965073 -1.133475,0.990981 -0.09715,0.0065 -0.226695,0.05829 -0.226695,0.155448 0,0.116586 0.161925,0.116586 0.233172,0.116586 1.075182,0 1.159383,0.725424 1.159383,0.848487 0,0.984504 -0.505206,1.10109 -0.71247,1.10109 -0.03239,0 -0.07125,-0.01295 -0.0842,-0.01295 -0.07125,-0.0065 -0.252603,-0.0065 -0.25908,-0.148971 v -0.04534 c 0,-0.207264 0.207264,-0.343281 0.213741,-0.615315 0,-0.38862 -0.272034,-0.673608 -0.673608,-0.673608 -0.03239,0 -0.06477,0 -0.09716,0.01295 C 0.680051,2.856364 0.505172,2.94704 0.388586,3.070103 0.233138,3.212597 0.187799,3.432815 0.187799,3.640079",
            "m 0,2.338199 m 0.375666,1.042797 h 1.729359 v 0.589407 c 0,0.252603 -0.200787,0.32385 -0.369189,0.32385 -0.148971,0 -0.213741,0.0842 -0.213741,0.181356 0,0.09068 0.03239,0.19431 0.174879,0.19431 h 1.988439 c 0.09068,0 0.187833,-0.06477 0.187833,-0.19431 0,-0.12954 -0.116586,-0.187833 -0.207264,-0.187833 -0.09068,0 -0.291465,-0.05829 -0.291465,-0.356235 V 3.380996 h 0.680085 c 0.09716,0 0.142494,-0.06477 0.142494,-0.174879 0,-0.110109 -0.03886,-0.174879 -0.142494,-0.174879 H 3.374517 V 1.029845 c 0,-0.07125 -0.0065,-0.155448 -0.110109,-0.155448 -0.0842,0 -0.12954,0.01943 -0.187833,0.0842 L 2.189226,2.027302 c -0.03239,0.05182 -0.0842,0.103632 -0.0842,0.220218 V 3.031237 H 0.848488 C 1.593343,2.396491 3.08953,0.278512 3.115438,0.17488 c 0,-0.01943 0.0065,-0.02591 0.0065,-0.04534 C 3.121938,0.05182 3.057168,0 2.985921,0 2.901721,0 2.519577,0.01295 2.351175,0.01295 2.182773,0.01295 1.761768,0 1.690521,0 1.606321,0 1.47678,0.02591 1.47678,0.174879 c 0,1.152906 -0.919734,2.454783 -1.198245,2.843403 l -0.05182,0.07772 c 0,0.0065 -0.01295,0.01943 -0.01295,0.02591 -0.01943,0.03886 -0.02591,0.07125 -0.02591,0.103632 0,0.09068 0.07125,0.155448 0.187833,0.155448",
            "m 0,2.292864 m 0.187833,1.185291 c 0,0.770763 0.505206,1.152906 1.651635,1.152906 1.114044,0 1.735836,-0.686562 1.735836,-1.528572 0,-0.848487 -0.693039,-1.535049 -1.541526,-1.535049 -0.544068,0 -0.945642,0.09068 -1.243584,0.265557 -0.01295,0.01295 -0.03238,0.01295 -0.04534,0.01295 -0.03886,0 -0.03886,-0.03886 -0.03886,-0.06477 v -0.03886 c 0,0 0.03886,-0.524637 0.05182,-0.608838 0.0065,-0.07125 0.05182,-0.116586 0.136017,-0.116586 h 0.03886 c 0.09068,0.01943 0.531114,0.0842 0.913257,0.0842 1.2954,0 1.340739,-0.751332 1.340739,-0.900303 0,-0.116586 -0.02591,-0.19431 -0.12954,-0.19431 -0.116586,0 -0.848487,0.0842 -1.146429,0.0842 C 1.612776,0.09068 0.809628,0.01943 0.65418,0 0.485778,0 0.440439,0.0842 0.427485,0.155448 l -0.103632,2.07264 v 0.01943 c 0,0.123063 0.09716,0.136017 0.187833,0.136017 0.09716,0 0.103632,-0.0842 0.207264,-0.181356 0.09068,-0.09715 0.317373,-0.310896 0.634746,-0.310896 0.317373,0 0.958596,0.174879 0.958596,1.211199 0,1.029843 -0.550545,1.159383 -0.790194,1.159383 -0.07772,0 -0.148971,0 -0.213741,-0.02591 -0.05182,-0.03239 -0.103632,-0.07125 -0.116586,-0.136017 0,-0.06477 0.06477,-0.09715 0.116586,-0.12954 0.213741,-0.12954 0.349758,-0.362712 0.349758,-0.621792 0,-0.414528 -0.32385,-0.731901 -0.725424,-0.731901 -0.505206,0 -0.705993,0.369189 -0.738378,0.693039 -0.0065,0.05829 -0.0065,0.110109 -0.0065,0.168402",
            "m 0,2.338195 m 0.187833,-0.02591 v 0.03239 c 0.0065,0.433959 0.0842,0.919734 0.284988,1.288923 0.382143,0.693039 0.84201,1.029843 1.625727,1.029843 0.421005,0 0.887349,-0.07125 1.224153,-0.336804 0.32385,-0.265557 0.537591,-0.680085 0.537591,-1.10109 0,-0.731901 -0.686562,-1.353693 -1.405509,-1.353693 -0.297942,0 -0.608838,0.110109 -0.848487,0.32385 -0.01943,0.01943 -0.03886,0.01943 -0.05829,0.01943 -0.05829,0 -0.0842,-0.07125 -0.0842,-0.220218 0.02591,-1.729359 0.576453,-1.774698 0.77724,-1.774698 0.181356,0 0.304419,0.04534 0.304419,0.142494 0,0.12954 -0.174879,0.239649 -0.233172,0.349758 -0.04534,0.0842 -0.06477,0.181356 -0.06477,0.272034 0,0.142494 0.04534,0.278511 0.142494,0.382143 0.06477,0.123063 0.330327,0.19431 0.45339,0.19431 0.395097,0 0.744855,-0.304419 0.744855,-0.705993 0,-0.03886 0,-0.06477 -0.0065,-0.103632 C 3.491082,0.155448 2.759183,0 2.253977,0 1.547984,0.0065 0.88733,0.349758 0.550526,0.984504 0.343262,1.379601 0.187814,1.871853 0.187814,2.312289 m 1.884807,0.0065 c 0.297942,0 0.550545,0.466344 0.550545,1.042797 0,0.58293 -0.252603,1.049274 -0.550545,1.049274 -0.297942,0 -0.544068,-0.466344 -0.544068,-1.049274 0,-0.576453 0.246126,-1.042797 0.544068,-1.042797",
            "M 0,2.325235 M 0.187833,1.865368 c 0,0 0.0065,0.148971 0.103632,0.148971 0.07125,0 0.09716,-0.07772 0.136017,-0.181356 0.09716,-0.233172 0.213741,-0.77724 0.634746,-0.77724 0.375666,0 0.822579,0.699516 1.36017,0.699516 0.265557,0 0.395097,-0.136017 0.466344,-0.19431 0.03239,-0.01943 0.06477,-0.03886 0.0842,-0.03886 0.03886,0 0.05829,0.02591 0.06477,0.0842 0,0.25908 -0.71247,0.783717 -1.275969,1.444371 C 1.405508,3.465188 1.12052,4.002779 1.12052,4.365491 c 0,0.200787 0,0.291465 0.174879,0.291465 0.168402,0 0.375666,-0.0842 0.608838,-0.0842 0.233172,0 0.667131,0.0842 0.764286,0.0842 0.09068,0 0.148971,-0.07772 0.148971,-0.343281 0,-1.560957 1.107567,-2.895219 1.107567,-3.853815 V 0.421 c 0,-0.252603 0,-0.369189 -0.155448,-0.369189 -0.01295,0 -0.161925,0.03239 -0.19431,0.09716 -0.07125,0.116586 -0.200787,0.6477 -0.433959,0.6477 C 2.908172,0.796671 2.474213,0 1.696973,0 1.159382,0 1.016888,0.220218 0.887348,0.336804 0.757808,0.459867 0.699515,0.498729 0.634745,0.505206 c -0.07772,0 -0.19431,-0.12954 -0.246126,-0.220218 -0.01295,-0.03886 -0.06477,-0.06477 -0.110109,-0.06477 -0.04534,0 -0.09068,0.02591 -0.09068,0.110109",
            "m 0,2.415921 m 0.187833,1.23063 c 0,0.809625 0.835533,1.185291 1.761744,1.185291 0.932688,0 1.930146,-0.401574 1.930146,-1.658112 0,-0.563499 -0.32385,-0.867918 -0.764286,-1.094613 C 3.452241,1.865376 3.672459,1.560957 3.672459,1.094613 3.672459,0.142494 2.305812,0 2.053209,0 0.97155,0 0.233172,0.492252 0.233172,1.275969 c 0,0.6477 0.362712,0.990981 0.809625,1.243584 C 0.557022,2.752725 0.187833,3.057144 0.187833,3.646551 m 0.531114,-0.04534 c 0,-0.375666 0.32385,-0.718947 0.738378,-0.874395 0.680085,0.297942 1.366647,0.492252 1.366647,1.107567 0,0.369189 -0.284988,0.686562 -0.913257,0.686562 -0.621792,0 -1.191768,-0.317373 -1.191768,-0.919734 M 2.033778,0.272034 c 0.297942,0 1.088136,0.148971 1.088136,0.803148 0,0.369189 -0.181356,0.615315 -0.492252,0.790194 C 1.884807,1.606296 1.088136,1.444371 1.088136,0.861441 c 0,-0.395097 0.537591,-0.589407 0.945642,-0.589407",
            "m 0,2.338201 m 1.593342,0.446913 c 0.297942,0 0.608838,-0.110109 0.848487,-0.32385 0.01943,-0.01943 0.03886,-0.01943 0.05829,-0.01943 0.05829,0 0.0842,0.07125 0.0842,0.220218 -0.02591,1.729359 -0.576453,1.774698 -0.77724,1.774698 -0.181356,0 -0.304419,-0.04534 -0.304419,-0.142494 0,-0.12954 0.174879,-0.239649 0.233172,-0.349758 0.04534,-0.0842 0.06477,-0.181356 0.06477,-0.272034 0,-0.142494 -0.04534,-0.278511 -0.142494,-0.382143 -0.06477,-0.123063 -0.336804,-0.19431 -0.45339,-0.19431 -0.395097,0 -0.744855,0.304419 -0.744855,0.705993 0,0.03886 0,0.06477 0.0065,0.103632 C 0.557043,4.50152 1.288942,4.663445 1.787671,4.663445 2.500141,4.650495 3.160795,4.30721 3.497599,3.672464 3.704863,3.277367 3.860311,2.785115 3.860311,2.344679 V 2.312289 C 3.853811,1.87833 3.776111,1.399032 3.575323,1.023366 3.186703,0.330327 2.733313,0 1.949596,0 1.528591,0 1.062247,0.06477 0.725443,0.330327 0.401593,0.595884 0.187852,1.016889 0.187852,1.431417 c 0,0.731901 0.686562,1.353693 1.405509,1.353693 M 1.424959,1.2954 c 0,-0.58293 0.252603,-1.049274 0.550545,-1.049274 0.297942,0 0.544068,0.466344 0.544068,1.049274 0,0.576453 -0.246126,1.042797 -0.544068,1.042797 -0.297942,0 -0.550545,-0.466344 -0.550545,-1.042797"
        ],
        hBody: "M 3.6054982,4.5550667e-4 C 3.0715691,0.01050967 2.5022641,0.12364551 1.9629109,0.35145186 0.39390532,1.0142331 -0.32753406,2.3790333 0.14117542,3.4886159 0.60991115,4.5982255 2.0913132,5.0325126 3.6603199,4.3697313 5.2293255,3.7069236 6.2918128,2.1980319 5.823077,1.0884487 5.5154989,0.36034186 4.6248585,-0.01494324 3.6054982,4.5550667e-4 Z M 4.3574705,0.82693457 c 0.4186502,0 0.7199842,0.11210396 0.8549746,0.31469543 C 5.5427245,1.6375385 4.8118924,2.54244 3.5800982,3.1628345 2.348303,3.7832295 1.0820072,3.8841151 0.75172782,3.3883388 0.42144844,2.8924303 1.1522541,1.9875294 2.3840747,1.3671344 3.0647164,1.0243402 3.7914474,0.8254529 4.3574705,0.82693457 Z",
        fBody: "M 3.6603411,4.369816 C 2.0913341,5.0324914 0.60990559,4.5983102 0.14116979,3.4887006 -0.32753961,2.3791185 0.39395268,1.0143183 1.9629583,0.35153706 3.5319388,-0.31127065 5.3543094,-0.02096984 5.8230188,1.0886398 6.2917282,2.1982229 5.2293467,3.7070083 3.6603411,4.369816 Z",
        wing: "M 4.3537717,10.87284 C 5.2271877,8.1564427 4.9141062,6.404266 2.2734852,3.4125958 1.7002654,2.763176 0.44174833,2.1533908 0.44174833,0 H 0 V 5.7333621 H 0.44174833 V 3.5726687 C 1.2042775,4.061169 2.239989,4.8090667 2.7934179,5.4735677 c 1.069975,1.2845785 1.866609,2.1589735 1.3441627,5.0414763 z",
        n1: "m 3.6054982,-2.3495445 c -0.5339291,0.010054 -1.1032341,0.12319 -1.6425873,0.3509963 C 0.39390532,-1.3357669 -0.32753406,0.02903329 0.14117542,1.1386159 0.60991115,2.2482255 2.0913132,2.6825126 3.6603199,2.0197313 5.2293255,1.3569236 6.2918128,-0.15196811 5.823077,-1.2615513 5.5154989,-1.9896582 4.6248585,-2.3649433 3.6054982,-2.3495445 Z m 0.7519723,0.8264791 c 0.4186502,0 0.7199842,0.1121039 0.8549746,0.3146954 C 5.5427245,-0.71246151 4.8118924,0.19243999 3.5800982,0.81283449 2.348303,1.4332295 1.0820072,1.5341151 0.75172782,1.0383388 0.42144844,0.54243029 1.1522541,-0.36247061 2.3840747,-0.98286561 3.0647164,-1.3256598 3.7914474,-1.5245471 4.3574705,-1.5230654 Z",
        n2: "M 5.4343379,-16.6 V -1.7988263 C 5.0033846,-2.1775299 4.3383015,-2.3706757 3.6055115,-2.358478 3.0715559,-2.349478 2.5025686,-2.2354209 1.9632419,-2.0076089 0.39423631,-1.3448012 -0.32757348,0.02005076 0.14113589,1.1296591 0.60987173,2.2393475 2.0913003,2.6734762 3.6602802,2.0107475 5.1552819,1.3792668 6.1872627,-0.01950424 5.8761656,-1.1099846 V -16.484763 Z M 4.3574044,-1.5321792 c 0.4186502,0 0.7202752,0.112077 0.8552392,0.3147216 C 5.5429229,-0.72160291 4.811985,0.18372176 3.5801909,0.80411643 2.3483959,1.4245108 1.0821794,1.5252108 0.75192652,1.0294091 0.42162069,0.53352743 1.1525851,-0.37132091 2.3844057,-0.99163658 3.0650471,-1.3344302 3.7913813,-1.5330522 4.3574044,-1.5321792 Z",
        n4: "M 5.4338987,-16.6267 V -1.8270931 C 4.6886204,-2.4808514 3.24172,-2.5740504 1.9627768,-2.0337847 0.39379763,-1.3709911 -0.32753591,-0.00612812 0.1412,1.1034783 0.6099093,2.2130607 2.0913378,2.6473474 3.6603702,1.9845667 5.1558481,1.352874 6.1879083,-0.04705612 5.8757264,-1.1377215 V -16.511461 Z",
        n8: "M 5.4338908,-16.6 V -1.8003873 C 4.6886389,-2.4541726 3.2417147,-2.5473266 1.9627951,-2.0070799 0.39379181,-1.3442932 -0.327524,0.02060076 0.14119185,1.1301831 0.6099212,2.2397925 2.0913585,2.6740522 3.6603622,2.0112715 5.1558693,1.3795268 6.1879268,-0.02035624 5.8757185,-1.1110165 V -11.4835 c 0.7995708,0.12909 1.557102,0.555569 2.1296048,1.140487 1.0928906,1.1165914 1.806366,2.8096629 1.4691519,4.6906652 -0.2430701,1.3558561 -0.6764867,2.2088728 -1.1115675,3.2866248 l 0.3126581,-0.03307 C 9.3009879,-3.813072 10.340258,-5.8140058 10.069258,-7.912154 9.8180499,-9.8570773 8.4631133,-11.21149 7.5820958,-12.311382 6.6707994,-13.449073 5.9883781,-14.192491 5.820447,-16.579847 Z",
        n16: "m 5.8757159,-17 -0.4418278,0.0037 V -1.7491779 C 4.6886363,-2.4029626 3.2417359,-2.4961226 1.9627929,-1.9558699 0.39378731,-1.2930892 -0.32751977,0.07182176 0.14118955,1.1814041 0.60992544,2.2910125 2.091354,2.7252732 3.6603596,2.0624925 5.155864,1.4307471 6.1878977,0.03083776 5.8757159,-1.0598065 v -8.1788231 c 0.6857206,0.4981049 1.5967868,1.0480096 2.264992,1.5523636 0.928423,0.7007697 1.5545065,1.3378155 1.8096971,2.4509929 0.223626,0.9755743 0.010319,2.5361624 -0.6604264,3.9842529 l 0.2620168,0.0032 C 10.129978,-2.5094576 10.499495,-3.338105 10.402075,-5.0899631 10.370854,-5.6511448 10.209168,-6.1904445 9.9586865,-6.7095042 10.600804,-9.1061786 10.15387,-10.815102 7.7071352,-13.587138 7.1339154,-14.236563 5.8757159,-14.846502 5.8757159,-16.999841 Z m 0.00873,3.581693 c 0.7617631,0.488606 1.7915214,1.233406 2.3430189,1.895503 0.9716029,1.166466 1.7142883,1.9997744 1.4521127,4.3005113 C 9.129985,-8.1299987 8.333695,-8.9734904 7.5153652,-9.7606523 6.9207671,-10.332602 5.9734,-11.604164 5.8844471,-13.418307 Z",
        n32: "M 5.4343723,-20.996415 V -1.7800232 C 4.6892792,-2.434258 3.2425111,-2.527635 1.9632758,-1.9872443 0.39427018,-1.3244425 -0.32759253,0.04040676 0.1411433,1.1500161 0.60985268,2.2595982 2.0913341,2.6933832 3.6603146,2.0306015 5.1551046,1.3991478 6.1869532,7.9876e-4 5.8762,-1.0896195 V -9.270002 c 0.6856942,0.4981146 1.5967869,1.0480034 2.2649921,1.552354 0.9283965,0.7007458 1.5545065,1.3378415 1.8096971,2.4510199 0.2236258,0.9755734 0.010319,2.5361885 -0.6604,3.9842516 l 0.2619904,0.0032 c 0.5779554,-1.2616101 0.9475254,-2.0903378 0.8500794,-3.84217 -0.03122,-0.5613927 -0.193251,-1.1007984 -0.4439175,-1.6200431 0.3552825,-1.326339 0.3736445,-2.4436684 -0.093001,-3.6452594 0.7691965,-2.569648 0.3967425,-4.306133 -2.1580211,-7.2006 C 7.1343996,-18.236679 5.8762,-18.846611 5.8762,-21 Z M 5.8762,-17.42403 c 0.7625292,0.488517 1.7978438,1.236732 2.3512727,1.901178 1.0158942,1.21964 1.7831593,2.072745 1.411314,4.622459 C 9.2344505,-11.720838 8.6095575,-12.596725 7.7076194,-13.618576 7.1343996,-14.268004 5.8762,-14.877938 5.8762,-17.031287 Z m 0.00873,3.974438 c 0.7617367,0.488612 1.7910188,1.233404 2.3424898,1.895492 0.9716294,1.166501 1.7148175,1.9998033 1.4526419,4.3005047 C 9.1304957,-8.1612716 8.3341792,-9.004771 7.5158494,-9.7919327 6.9212513,-10.363884 5.9738842,-11.635464 5.8849313,-13.449592 Z",
        n2r: "m 3.6887018,-2.0997399 c -0.4449763,0.00571 -0.9272059,0.1055238 -1.4175052,0.3126422 -1.49550441,0.6317271 -2.52753811,2.031627 -2.21535623,3.1222889 V 16.708935 l 0.44182765,0.115227 V 2.0230074 C 0.92864781,2.4016261 1.5937839,2.5948249 2.3264945,2.582654 2.8604501,2.5739228 3.4294366,2.4590936 3.9687897,2.2312609 5.5377689,1.5684797 6.2590759,0.2041195 5.7903666,-0.9054981 5.4681041,-1.6684029 4.6676336,-2.1123129 3.6887018,-2.0997399 Z m 0.7761816,0.9839166 c 0.335915,0.022172 0.5913702,0.1241346 0.7151952,0.3100599 0.3303059,0.495898 -0.400632,1.4012537 -1.6324527,2.0215799 -0.680667,0.3427942 -1.4075039,0.5408877 -1.973527,0.5400146 -0.4186503,0 -0.71977255,-0.1120775 -0.8547365,-0.3146954 C 0.38905656,0.9452589 1.1200209,0.0404561 2.3518151,-0.5799362 3.1216997,-0.9676857 3.9049986,-1.1527776 4.4648834,-1.1158233 Z",
        n4r: "m 3.688244,-2.1164021 c -0.4449762,0.00577 -0.9266502,0.1055264 -1.4169755,0.3126316 -1.49476351,0.6313594 -2.52661192,2.03030666 -2.21588526,3.1207339 V 16.691746 l 0.44185404,0.115755 V 2.006838 C 1.2423304,2.6610732 2.6890715,2.7549844 3.968332,2.2145888 5.5373376,1.5517917 6.2591738,0.18693066 5.790438,-0.92268148 5.468202,-1.6855255 4.6672024,-2.1290809 3.688244,-2.1164021 Z",
        n8r: "m 2.2708775,-1.7870966 c -1.54085398,0.650875 -2.58950357,2.11709 -2.1828126,3.2204562 V 16.824143 l 0.38652987,-0.02011 C 0.64252581,14.416673 1.3249656,13.673249 2.2362435,12.535567 3.117252,11.435668 4.4722097,10.081266 4.7234316,8.13634 4.9944443,6.0381944 3.9546318,4.0372565 3.3292097,2.6229792 L 3.0170808,2.5899063 C 3.4521352,3.66766 3.8855491,4.5206767 4.1286483,5.876534 4.4658597,7.7575363 3.7523579,9.450605 2.65947,10.5672 2.0869921,11.152114 1.3294635,11.578596 0.52989268,11.707713 V 2.0509236 C 1.2839287,2.6801027 2.707386,2.7639756 3.9684431,2.23129 5.5374487,1.5685088 6.2587558,0.2035755 5.79002,-0.9060076 5.4677839,-1.6688543 4.6667843,-2.112333 3.687826,-2.0997388 c -0.4449763,0.00571 -0.9266502,0.1055211 -1.4169485,0.3126422 z",
        n16r: "M 2.2743583,-1.7866217 C 0.95906167,-1.2310178 0.00407458,-0.0816096 0.00370417,0.928741 L 0,17.114031 l 0.44182771,0.0032 c 0,-2.153338 1.25819959,-2.762779 1.83141939,-3.412199 C 4.719955,10.932975 5.1669156,9.223548 4.5247719,6.8268988 4.7752794,6.3078128 4.9369662,5.7690153 4.9681606,5.2078605 5.047959,3.7732103 4.8119506,2.9554361 4.4074821,2.0142603 5.668645,1.3004938 6.216015,0.0943859 5.793449,-0.9059719 5.4711865,-1.6688345 4.6701869,-2.1123 3.6912815,-2.0997402 3.2463581,-2.0940252 2.7646842,-1.9937428 2.2743583,-1.7866217 Z M 0.44190708,1.9656034 C 1.1667067,2.6704534 2.6568135,2.7867536 3.971925,2.2312186 4.0380973,2.203268 4.1005125,2.17219 4.1636421,2.1418159 4.5836152,3.3491361 4.7007462,4.5496274 4.5165962,5.3529844 4.2614056,6.4661632 3.6353221,7.1032349 2.7068992,7.804005 2.038694,8.308359 1.1276012,8.857735 0.44190708,9.355839 Z M 4.2452925,7.3394232 C 4.507574,9.640372 3.7653383,10.473926 2.793709,11.640463 2.2422115,12.302567 1.2124531,13.046856 0.45069125,13.535436 0.53967063,11.721373 1.4870113,10.450248 2.0816094,9.878312 2.8998598,9.091216 3.6957265,8.247023 4.2452925,7.3394232 Z",
        n32r: "m 0,21.082794 0.44182771,0.0032 c 0,-2.153338 1.25819959,-2.762779 1.83141939,-3.412201 2.5547637,-2.894457 2.9272177,-4.631465 2.158021,-7.201109 C 4.8978344,9.27113 4.8795517,8.153673 4.5242692,6.8274015 4.7749354,6.3081382 4.9369662,5.7687321 4.9681871,5.2073472 5.0479854,3.7726731 4.8114744,2.9554625 4.4069794,2.0142602 5.6683275,1.3004832 6.2160944,0.0944917 5.793449,-0.9059746 5.4712129,-1.668808 4.6702133,-2.1123 3.6912815,-2.0997402 3.2463581,-2.0940252 2.7646842,-1.9937455 2.2743583,-1.7866217 0.95906167,-1.2310152 0.00195792,-0.081607 0.00185208,0.9294924 Z M 0.44193354,1.9656034 C 1.1667067,2.6704666 2.6563108,2.7867616 3.9714223,2.2312212 4.0377269,2.2032124 4.1004067,2.1722721 4.1636685,2.1418212 4.5836152,3.3491308 4.7007462,4.5496274 4.5165962,5.352995 4.2614056,6.4661738 3.6352956,7.1032614 2.7068992,7.8040077 2.038694,8.308364 1.1276277,8.857735 0.44193354,9.35585 Z M 4.245319,7.3394364 C 4.507574,9.640372 3.7648621,10.473918 2.7932063,11.640466 2.2417352,12.302557 1.2124531,13.046827 0.45071771,13.535441 0.53967063,11.721378 1.4870113,10.449725 2.0816094,9.877783 2.8998862,9.090687 3.6957265,8.247037 4.245319,7.3394364 Z M 4.204494,10.986241 c 0.3718984,2.549787 -0.3954197,3.403333 -1.4112875,4.622983 -0.5534554,0.664475 -1.58877,1.412134 -2.35127266,1.900661 v -0.392748 c 0,-2.153338 1.25817316,-2.762776 1.83139296,-3.412199 0.9020968,-1.022022 1.5268575,-1.898131 1.9311672,-2.718697 z",
        notaYOffset: -2.34
    };

    function Note(pitch, duration) {
        this.noteRoot = '';
        this.noteOctave = 0;
        this.noteComma = '';
        this.durStr = duration;
        let durParts = this.durStr.split('/');
        this.durNum = parseInt(durParts[0]);
        this.durDen = parseInt(durParts[1]);
        this.isDotted = (this.durNum === 3);

        if (this.isDotted) {
            this.durNum = 1;
            this.durDen = this.durDen / 2;
            this.durStr = this.durNum + "/" + this.durDen;
        }

        if (pitch.includes('#') || pitch.includes('b')) {
            this.noteComma = pitch.substr(-2);
        }

        this.noteRoot = pitch.replace(this.noteComma, '');
        this.noteOctave = parseInt(this.noteRoot.substr(-1));
        this.noteRoot = this.noteRoot.slice(0, -1).toLowerCase();
        if (this.noteComma) {
            this.noteComma = this.noteComma.replace('#', 'd');
        }

        this.toStr = function () {
            if (this.noteComma) {
                return [this.noteRoot, this.noteOctave, this.noteComma, this.durNum, this.durDen].join(':');
            } else {
                return [this.noteRoot, this.noteOctave, this.durNum, this.durDen].join(':');
            }
        };

        this.getNote = function () {
            return this.noteRoot + this.noteOctave;
        };

        this.getAcc = function () {
            return this.noteComma;
        };

        this.getPathStr = function (durStr) {
            let path;
            let isUpsideDown = (notePositions[this.getNote()] <= 2);
            switch (durStr) {
                case "1/32":
                    if (isUpsideDown) {
                        path = symbols.n32r;
                    } else {
                        path = symbols.n32;
                    }
                    break;
                case "1/16":
                    if (isUpsideDown) {
                        path = symbols.n16r;
                    } else {
                        path = symbols.n16;
                    }
                    break;
                case "1/8":
                    if (isUpsideDown) {
                        path = symbols.n8r;
                    } else {
                        path = symbols.n8;
                    }
                    break;
                case "1/4":
                    if (isUpsideDown) {
                        path = symbols.n4r;
                    } else {
                        path = symbols.n4;
                    }
                    break;
                case "1/2":
                    if (isUpsideDown) {
                        path = symbols.n2r;
                    } else {
                        path = symbols.n2;
                    }
                    break;
                case "1/1":
                    path = symbols.n1;
                    break;
                default:
                    path = symbols.n4;
                    break;
            }
            return path;
        };

        this.drawNote = function (paper, porteLiHe, lThickness, left, top, color, lColor, acci) {
            let portePos = notePositions[this.getNote()];
            let noteBodyTop = top + porteLiHe * portePos;
            left = Math.round(left * 100) / 100;
            noteBodyTop = Math.round(noteBodyTop * 100) / 100;
            let accSymbol = null;
            let stepLines = [];

            if (acci) {
                let accPath = symbols[acci];
                accSymbol = paper.path(accPath);
                let scaleFactor = parseFloat((porteLiHe / 3.25).toFixed(2));
                accSymbol.transform('t ' + left + ' ' + noteBodyTop + ' ' + 's' + scaleFactor + ' 0 0');
                accSymbol.attr({
                    fill: color
                });

                left += accSymbol.getBBox().width + (porteLiHe / 2);
            }

            if (portePos <= -1) {
                // higher than A5
                let stepCount = Math.floor(Math.abs(portePos));
                for (let i = 1; i <= stepCount; i++) {
                    let lineTop = top - i * porteLiHe;
                    let stepLine = paper.line(left - porteLiHe / 2, lineTop, left + porteLiHe * 3.5 / 2, lineTop);
                    stepLine.attr({
                        stroke: lColor,
                        strokeWidth: lThickness
                    });
                    stepLines.push(stepLine);
                }
            }
            if (portePos >= 5) {
                // lower than C4
                let stepCount = Math.floor(portePos - 4);
                for (let i = 1; i <= stepCount; i++) {
                    let lineTop = top + (i + 4) * porteLiHe;
                    let stepLine = paper.line(left - porteLiHe / 2, lineTop, left + porteLiHe * 3.5 / 2, lineTop);
                    stepLine.attr({
                        stroke: lColor,
                        strokeWidth: lThickness
                    });
                    stepLines.push(stepLine);
                }
            }

            let path = this.getPathStr(this.durStr);
            let noteBody = paper.path(path);
            let translateStr = 't ' + left + ' ' + noteBodyTop;
            let scaleFactor = porteLiHe / 5;
            let scaleStr = 's' + scaleFactor + ' 0 0';

            noteBody.transform(translateStr + ' ' + scaleStr);
            noteBody.attr({
                fill: color
            });
            let noteG = paper.g();

            for (let sl of stepLines) {
                noteG.add(sl);
            }

            if (accSymbol) {
                noteG.add(accSymbol);
            }

            noteG.add(noteBody);

            if (this.isDotted) {
                let dot = paper.circle((left + porteLiHe * 3.5 / 2), noteBodyTop, (porteLiHe / 5));
                dot.attr({
                    fill: color
                });
                noteG.add(dot);
            }

            return noteG;
        };
    }

    function Measure() {
        this.notes = [];
        this.reqWidth = 0;
        this.widthDiff = 0;
        this.startPos = 0;
        this.endPos = 0;
        this.paperNotes = [];

        this.addNote = function (pitch, dur) {
            let note = new Note(pitch, dur);
            this.notes.push(note);
        };

        this.getNotes = function () {
            return this.notes;
        };

        this.toStr = function () {
            return "";
        };

        this.getRequiredWidth = function (sParams) {
            if (this.reqWidth === 0) {
                if (this.notes.length === 0) {
                    this.reqWidth = sParams.cfg.porteLineHeight * 1.5 * 10;
                } else {
                    this.reqWidth = this.drawMeasure(sParams, true);
                }
            }
            return this.reqWidth;
        };

        this.setWidthDiff = function (diff) {
            this.widthDiff = diff;
        };

        this.getReqAccidental = function (accidentals, note) {
            let noteName = note.noteRoot;
            let noteAcc = note.noteComma;
            if (noteName in accidentals) {
                let globAcc = accidentals[noteName];
                if (noteAcc === globAcc) {
                    return "";
                } else {
                    if (noteAcc === "") {
                        return "n";
                    }
                    return noteAcc;
                }
            }
            return noteAcc;
        };

        this.drawMeasure = function (sParams, forReqWidth) {
            this.startPos = sParams.startLeft;
            let paper = sParams.paper;
            let top = sParams.startTop;
            let porteLiHe = sParams.cfg.porteLineHeight;
            let rw = this.widthDiff / (this.notes.length + 1);
            if (forReqWidth) {
                rw = 0;
            }
            let left = sParams.startLeft + porteLiHe * 1.5 + rw;
            let color = sParams.cfg.noteColor;
            let lThickness = sParams.cfg.lineThickness;
            let lColor = sParams.cfg.porteLineColor;

            if (forReqWidth) {
                color = 'transparent';
                lColor = 'transparent';
            }

            for (let note of this.notes) {
                let acci = this.getReqAccidental(sParams.accidentals, note);
                let noteG = note.drawNote(paper, porteLiHe, lThickness, left, top, color, lColor, acci);
                left += noteG.getBBox().width + porteLiHe * 1.5 + rw;
                this.paperNotes.push(noteG);
            }

            if (this.notes.length === 0) {
                left += porteLiHe * 1.5 * 9;
            }

            if (sParams.endPos - left <= 1) {
                left = sParams.endPos;
            }

            this.endPos = left;
            let x1 = left;
            let y1 = top;
            let y2 = top + porteLiHe * 4;
            if (!forReqWidth) {
                let mLine = paper.line(x1, y1, x1, y2);
                mLine.attr({
                    stroke: sParams.cfg.porteLineColor,
                    strokeWidth: sParams.cfg.lineThickness
                });
            } else {
                for (let i = 0; i < this.paperNotes.length; i++) {
                    this.paperNotes[i].remove();
                }
            }

            return left;
        };
    }

    function SatirObject(paper, configs, left, top, width, accidentals, timeSig) {
        this.paper = paper;
        this.configs = configs;
        this.left = left;
        this.top = top;
        this.width = width;
        this.lines = [];
        this.vLineLeft = null;
        this.vLineRight = null;
        this.solAnahtari = null;
        this.measures = [];
        this.remainingWidth = width;
        this.accidentals = accidentals;
        this.accidentalsGroup = null;
        this.box = {
            top: 0,
            right: 0,
            bottom: 0,
            left: 0
        };

        let porteLiHe = this.configs.porteLineHeight;
        let porteHeight = 4 * porteLiHe;
        let leftUsablePos = this.left + porteLiHe;

        this.getMWParams = function () {
            let acci = {};
            for (let note of this.accidentals.notes) {
                let name = noteNameDict[note.noteRoot];
                acci[name] = note.noteComma;
            }
            return {
                startLeft: 0,
                startTop: 0,
                cfg: this.configs,
                endPos: this.width + this.left,
                paper: this.paper,
                accidentals: acci
            };
        };

        this.acceptsMeasure = function (measure) {
            if (this.measures.length === 0) {
                // if this is the first measure always accept
                return true;
            }
            let sParams = this.getMWParams();
            return (this.remainingWidth >= measure.getRequiredWidth(sParams));
        };

        this.distributeWidth = function (remWid) {
            let widths = [];
            let total = 0;
            let sParams = this.getMWParams();
            for (let measure of this.measures) {
                let w = measure.getRequiredWidth(sParams);
                widths.push(w);
                total += w;
            }
            for (let i = 0; i < widths.length; i++) {
                this.measures[i].setWidthDiff((widths[i] / total) * remWid);
            }
        };

        this.addMeasure = function (measure) {
            this.measures.push(measure);
            let sParams = this.getMWParams();
            this.remainingWidth -= measure.getRequiredWidth(sParams);
        };

        this.drawLines = function () {
            for (let i = 0; i < 5; i++) {
                let x1 = this.left;
                let y1 = this.top + i * this.configs.porteLineHeight;
                let x2 = this.left + this.width;

                let line = this.paper.line(x1, y1, x2, y1);

                line.attr({
                    stroke: this.configs.porteLineColor,
                    strokeWidth: this.configs.lineThickness
                });

                this.lines.push(line);
            }
        };

        this.drawClef = function () {
            let leftUsablePos = this.left;

            // clef
            this.solAnahtari = this.paper.path(symbols.gClef);

            let solHeight = this.solAnahtari.getBBox().height;
            let solWidth = this.solAnahtari.getBBox().width;

            let scaleFactor = (porteHeight) * (74 / 40) / solHeight;
            let offsetLeft = scaleFactor * solWidth;

            let scaleStr = 's' + scaleFactor;

            let trLeft = leftUsablePos + (offsetLeft / 2);
            let trTop = this.top + Math.abs(solHeight - porteHeight) / 2;
            let translateStr = 't ' + trLeft + ' ' + trTop;

            this.solAnahtari.transform(translateStr + ' ' + scaleStr);
            this.solAnahtari.attr({
                fill: this.configs.mainColor
            });

            return (this.left + offsetLeft + porteLiHe * 1.5);
        };

        this.drawAccidentals = function (accidentals, leftUsablePos) {
            let lastAccWidth = 0;
            this.accidentalsGroup = this.paper.g();

            for (let i = 0; i < accidentals.notes.length; i++) {
                let note = accidentals.notes[i];
                let notePos = notePositions[note.getNote()];

                let accPath = symbols[note.getAcc()];
                let accSymbol = this.paper.path(accPath);
                let scaleFactor = parseFloat((porteLiHe / 3.25).toFixed(2));

                let top = this.top + (notePos * porteLiHe);

                let translateStr = 't ' + leftUsablePos + ' ' + top;
                let scaleStr = 's' + scaleFactor + ' 0 0';
                accSymbol.transform(translateStr + ' ' + scaleStr);
                accSymbol.attr({
                    fill: this.configs.mainColor
                });
                lastAccWidth = accSymbol.getBBox().width;
                leftUsablePos += lastAccWidth + porteLiHe / 2;
                this.accidentalsGroup.add(accSymbol);
            }

            return leftUsablePos;
        };

        this.drawMeter = function (leftUsablePos, timeSig) {
            leftUsablePos += porteLiHe / 2;
            let scaleFactor = parseFloat((porteLiHe / 2.5).toFixed(2));
            let numElems = ('' + timeSig.num).split('');
            let locLeft = 0;
            let numG = this.paper.g();
            let translateStr, scaleStr;
            for (let n of numElems) {
                let numElem = this.paper.path(symbols.numbers[parseInt(n)]);
                numG.add(numElem);
                translateStr = 't ' + locLeft + ' 0';
                scaleStr = 's' + scaleFactor + ' 0 0';
                numElem.transform(translateStr + ' ' + scaleStr);
                numElem.attr({
                    fill: this.configs.mainColor
                });
                locLeft += numElem.getBBox().width;
            }
            translateStr = 't ' + leftUsablePos + ' ' + (this.top + this.configs.lineThickness);
            numG.transform(translateStr);

            let denElems = ('' + timeSig.den).split('');
            let denG = this.paper.g();
            locLeft = 0;
            for (let n of denElems) {
                let denElem = this.paper.path(symbols.numbers[parseInt(n)]);
                denG.add(denElem);
                translateStr = 't ' + locLeft + ' 0';
                scaleStr = 's' + scaleFactor + ' 0 0';
                denElem.transform(translateStr + ' ' + scaleStr);
                denElem.attr({
                    fill: this.configs.mainColor
                });
                locLeft += denElem.getBBox().width;
            }
            let offset = (numG.getBBox().width - denG.getBBox().width) / 2;
            translateStr = 't ' + (leftUsablePos + offset) + ' ' + (this.top + porteLiHe * 2 + this.configs.lineThickness);
            denG.transform(translateStr);

            // measures
            leftUsablePos += Math.max(numG.getBBox().width, denG.getBBox().width) + porteLiHe;
            return leftUsablePos;
        };

        this.drawSatir = function () {
            this.distributeWidth(this.remainingWidth);

            let acci = {};
            for (let note of this.accidentals.notes) {
                let name = noteNameDict[note.noteRoot];
                acci[name] = note.noteComma;
            }

            let sParams = {
                startLeft: leftUsablePos,
                startTop: this.top,
                cfg: this.configs,
                endPos: this.width + this.left,
                paper: this.paper,
                accidentals: acci
            };

            for (let measure of this.measures) {
                leftUsablePos = measure.drawMeasure(sParams, false);
                sParams.startLeft = leftUsablePos;
            }
        };

        this.handleMouse = function (x, y) {
            if ((x <= this.box.right) && (x >= this.box.left) && (y >= this.box.top) && (y <= this.box.bottom)) {
                console.log(x, y);
            }
        };

        this.init = function () {
            this.drawLines();
            leftUsablePos = this.drawClef();
            leftUsablePos = this.drawAccidentals(this.accidentals, leftUsablePos);
            leftUsablePos = this.drawMeter(leftUsablePos, timeSig);

            this.remainingWidth = this.width - (leftUsablePos - this.left);

            this.box.top = this.top - porteLiHe * 5;
            this.box.right = this.left + this.width;
            this.box.bottom = this.top + porteLiHe * 9;
            this.box.left = this.left;
        };

        this.init();
    }

    function TmmScore(containerSelector) {
        let configs = {
            padding: {top: 20, right: 20, bottom: 20, left: 20},
            lineThickness: 0.5,
            porteLineHeight: 10,
            noteColor: "#2d3337",
            mainColor: "#3b4552",
            porteLineColor: "#4e5872",
            paperBgColor: "#f6f7f6",
            defMeasureCount: 4
        };

        // prep work
        let windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        let scorePaperWidth = 1000;
        if (windowWidth < 1100) {
            scorePaperWidth = windowWidth - 100;
        }

        createTMMMenu(containerSelector);

        let svgElem = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        let svgID = 'svg-tmm-score';
        svgElem.setAttribute('id', svgID);
        svgElem.setAttribute('class', 'shadowed');
        svgElem.style.backgroundColor = configs.paperBgColor;
        svgElem.style.width = scorePaperWidth + 'px';

        document.querySelector(containerSelector).append(svgElem);

        let paper = Snap('#' + svgID);
        // eof prep work

        let measures = [];
        let satirlar = [];
        let timeSignatures = [];
        let accidentals = [];

        this.setAccidentals = function (accidentalsArr) {
            let acci = {
                notes: [],
                startsAt: 0
            };

            for (let accidental of accidentalsArr) {
                let note = new Note(accidental, '1/1');
                acci.notes.push(note);
            }

            acci.startsAt = measures.length;
            accidentals.push(acci);
        };

        this.setMeter = function (meter) {
            let parts = meter.split('/');
            let timeSignature = {
                num: parseInt(parts[0]),
                den: parseInt(parts[1]),
                startsAt: measures.length
            };
            timeSignatures.push(timeSignature);
        };

        this.addMeasure = function (measure) {
            measures.push(measure);
        };

        this.initScore = function () {
            // create satir objects
            let pLeft = configs.padding.left;
            let pRight = configs.padding.right;
            let pTop = configs.padding.top;
            let satirWidth = scorePaperWidth - pLeft - pRight;
            let numOfReqLines = 1;
            configs.defMeasureCount = Math.floor((satirWidth / configs.porteLineHeight) / 20);

            while (measures.length < configs.defMeasureCount) {
                measures.push(new Measure());
            }

            let offsetTop = pTop + (6 * configs.porteLineHeight);
            let satir = new SatirObject(paper, configs, pLeft, offsetTop, satirWidth, accidentals[0], timeSignatures[0]);
            satirlar.push(satir);
            for (let measure of measures) {
                if (!satir.acceptsMeasure(measure)) {
                    numOfReqLines += 1;
                    offsetTop += 17 * configs.porteLineHeight;
                    satir = new SatirObject(paper, configs, pLeft, offsetTop, satirWidth, accidentals[0], timeSignatures[0]);
                    satirlar.push(satir);
                }
                satir.addMeasure(measure);
            }

            svgElem.style.height = (configs.padding.top + configs.padding.bottom) + (numOfReqLines * 17 * configs.porteLineHeight) + 'px';
            // eof satir objects
        };

        this.drawScore = function () {
            this.initScore();
            for (let satir of satirlar) {
                satir.drawSatir();
            }

            let pt = svgElem.createSVGPoint();
            svgElem.addEventListener('mousemove', function (evt) {
                pt.x = evt.clientX;
                pt.y = evt.clientY;
                let loc = pt.matrixTransform(svgElem.getScreenCTM().inverse());
                let x = Math.max(Math.round(loc.x), 0);
                let y = Math.max(Math.round(loc.y), 0);

                for (let satir of satirlar) {
                    satir.handleMouse(x, y);
                }
            }, false);

        };
    }

    let tmmScore = new TmmScore('#dv-tmm-wrapper');

    tmmScore.setAccidentals(['B4b4', 'F5#4', 'C5#4']);
    tmmScore.setMeter('9/8');

    let measure = new Measure();
    measure.addNote('Do4#4', '3/64');
    measure.addNote('La4', '1/4');
    measure.addNote('Do5', '1/16');
    measure.addNote('Si4b4', '3/16');
    measure.addNote('Do5#4', '3/8');
    measure.addNote('Re5', '3/4');
    measure.addNote('Sol5', '1/1');
    measure.addNote('Do6', '3/8');

    tmmScore.addMeasure(measure);

    measure = new Measure();
    measure.addNote('Fa5', '1/2');
    measure.addNote('Mi5', '1/4');
    measure.addNote('Re5', '1/8');
    measure.addNote('Do5#4', '1/16');

    tmmScore.addMeasure(measure);

    tmmScore.drawScore();

</script>
</body>
</html>